(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{108:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return s})),a.d(t,"metadata",(function(){return l})),a.d(t,"rightToc",(function(){return i})),a.d(t,"default",(function(){return u}));var r=a(2),n=a(6),o=(a(0),a(1808)),s={sidebar_label:"Simultaneous Server Update",title:"Simultaneous Server Update"},l={unversionedId:"tree/simultaneous_server_update",id:"tree/simultaneous_server_update",isDocsHomePage:!1,title:"Simultaneous Server Update",description:"`tododelete \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f?`",source:"@site/docs/tree/simultaneous_server_update.md",slug:"/tree/simultaneous_server_update",permalink:"/tree/simultaneous_server_update",editUrl:"https://github.com/Labirintami/doc/edit/master/docs/tree/simultaneous_server_update.md",version:"current",sidebar_label:"Simultaneous Server Update"},i=[{value:"dataProcessor Module",id:"dataprocessor-module",children:[]},{value:"Enabling dataProcessor Module",id:"enabling-dataprocessor-module",children:[]},{value:"Server-Side dataProcessor Handling",id:"server-side-dataprocessor-handling",children:[]}],d={rightToc:i};function u(e){var t=e.components,a=Object(n.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},d,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"tododelete \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f?")," "),Object(o.b)("h2",{id:"dataprocessor-module"},"dataProcessor Module"),Object(o.b)("p",null,"Common tree manipulations like drag-n-drop (including d-n-d between trees), removing an item, inserting an item,\nor updating an item's label can be simultaneously reflected in the server database now (since v.1.3) using dataProcessor module."),Object(o.b)("p",null,"The main features of this module are:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"An updated/inserted item is marked with the bold text, the text of a deleted item is strikethrough;"),Object(o.b)("li",{parentName:"ul"},"You can define the mode of data processing (automatic/manual).")),Object(o.b)("p",null,"The data of the updated/deleted items is sent to the server to the specified URL (we call it serverProcessor). "),Object(o.b)("p",null,"The serverProcessor should return a simple XML or JSON of the specified format to let the tree know about successful or unsuccessful processing.\nAll the necessary after-save procedures will be done automatically."),Object(o.b)("h2",{id:"enabling-dataprocessor-module"},"Enabling dataProcessor Module"),Object(o.b)("p",null,"To enable this feature the user should do the following:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Create dataProcessor object for the tree;"),Object(o.b)("li",{parentName:"ul"},"Initialize dataProcessor.")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},"<script>\n    ...\n    tree.init();\n    myDataProcessor = new dataProcessor(serverProcessorURL);\n    myDataProcessor.init(treeObj); // tree object to assign dataProcessor to, mandatory\n<\/script>\n")),Object(o.b)("p",null,"The mandatory parameter for dataProcessor is:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},'serverProcessorURL - URL of the file that will process the incoming data. If our server-side routines are used,\n"dhtmlxDataProcessor/server_code/PHP/update.php?ctrl=tree" should be indicated.')),Object(o.b)("h2",{id:"server-side-dataprocessor-handling"},"Server-Side dataProcessor Handling"),Object(o.b)("p",null,"Using the server-side dataProcessor the user should bear in mind the following:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"All data comes in GET scope:",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"tr_id - a node's id;"),Object(o.b)("li",{parentName:"ul"},"tr_order - a node's sequence on the level;"),Object(o.b)("li",{parentName:"ul"},"tr_pid - parent id;"),Object(o.b)("li",{parentName:"ul"},"tr_text - a node's text(label);"),Object(o.b)("li",{parentName:"ul"},"Userdata blocks are passed with their names."),Object(o.b)("li",{parentName:"ul"},"!nativeeditor_status - values can be as follows:",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},'"inserted" - item is inserted;'),Object(o.b)("li",{parentName:"ul"},'"deleted" - item is deleted;'),Object(o.b)("li",{parentName:"ul"},'"updated" or item doesn\'t exist - item is updated.'))))),Object(o.b)("li",{parentName:"ul"},"serverProcessor should return a valid XML of the following format:")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-xml"},"<data>\n<action type='insert/delete/update' sid='incoming_node_ID' tid='outgoing_node_ID'/>\n</data>\n")),Object(o.b)("p",null,'In the above mentioned snippet, "incoming_node_ID" and "outgoing_node_ID" may be different\nfor insert action only, but they are equal for other actions.'),Object(o.b)("p",null,"{{sample\ndhtmlxTree/samples/04_dataprocessor/01_pro_save_data.html\n}}"))}u.isMDXComponent=!0}}]);