(window.webpackJsonp=window.webpackJsonp||[]).push([[351],{1840:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/start_optimus-5eb92353d4f1e2bb40238354a6747cda.png"},410:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return r})),n.d(t,"default",(function(){return b}));var a=n(2),i=n(6),o=(n(0),n(1808)),l={sidebar_label:"DHTMLX Optimus Framework",title:"DHTMLX Optimus Framework"},s={unversionedId:"optimus_guides/index",id:"optimus_guides/index",isDocsHomePage:!1,title:"DHTMLX Optimus Framework",description:"DHTMLX Optimus is a component-oriented framework for building DHTMLX-based apps. The framework is intended to simplify the app building process, namely:",source:"@site/docs/optimus_guides/index.md",slug:"/optimus_guides/index",permalink:"/optimus_guides/index",editUrl:"https://github.com/Labirintami/doc/edit/master/docs/optimus_guides/index.md",version:"current",sidebar_label:"DHTMLX Optimus Framework",sidebar:"docs",previous:{title:"Touch Support",permalink:"/guides/touch_support"},next:{title:"How to start with Optimus",permalink:"/optimus_guides/how_to_start_optimus"}},r=[{value:"General Idea",id:"general-idea",children:[]},{value:"How to start",id:"how-to-start",children:[{value:"Running the environment",id:"running-the-environment",children:[]},{value:"Creating an application",id:"creating-an-application",children:[]}]},{value:"Application Structure",id:"application-structure",children:[]},{value:"Subscribing to global events",id:"subscribing-to-global-events",children:[]},{value:"Passing data to child components",id:"passing-data-to-child-components",children:[]},{value:"Initializing the app&#39;s global state",id:"initializing-the-apps-global-state",children:[]},{value:"Working with dhtmlxSuite&#39;s widgets",id:"working-with-dhtmlxsuites-widgets",children:[{value:"Initialization of the dhtmlxSuite components",id:"initialization-of-the-dhtmlxsuite-components",children:[]},{value:"Initialization of the dhtmlxWindow component",id:"initialization-of-the-dhtmlxwindow-component",children:[]},{value:"Initialization of the dhtmlxLayout component",id:"initialization-of-the-dhtmlxlayout-component",children:[]}]},{value:"API",id:"api",children:[{value:"Methods used inside the classes",id:"methods-used-inside-the-classes",children:[]}]}],c={rightToc:r};function b(e){var t=e.components,l=Object(i.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},c,l,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"DHTMLX Optimus is a component-oriented framework for building DHTMLX-based apps. The framework is intended to simplify the app building process, namely:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"helps to organize application code in a single, structured, intuitive style;"),Object(o.b)("li",{parentName:"ul"},"provides tools for exchanging data and events between application parts and an external environment (server, external services, etc.); "),Object(o.b)("li",{parentName:"ul"},"can automatically adjust the life cycle of components of the app (for example, free up the unused memory and so on).")),Object(o.b)("p",null,"The framework enforces consistent application structure by breaking a monolithic application into a set of reusable classes.\nAs a result, each part of an app can be developed and tested independently and used in various combinations."),Object(o.b)("p",null,"DHTMLX Optimus is a fully client-side solution. There aren't any special requirements to the server. You can use any data REST backend (PHP, Nodejs, .Net, Java, etc.)"),Object(o.b)("h2",{id:"general-idea"},"General Idea"),Object(o.b)("p",null,"DHTMLX Optimus is based on the modern approaches of web development:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"ES6 classes and JavaScript modules;"),Object(o.b)("li",{parentName:"ul"},"dividing the application into Views;"),Object(o.b)("li",{parentName:"ul"},"data transfer and the life cycle of a View ")),Object(o.b)("p",null,"Each module describes a part of UI (a single view). You can use normal DHTMLX code inside of the module to initialize a single component.\nTop level modules can combine multiple views. The app itself can be used as a view. "),Object(o.b)("p",null,"The framework provides a common event bus to allow communication between views and some other helpers for common DHTMLX tasks."),Object(o.b)("h2",{id:"how-to-start"},"How to start"),Object(o.b)("p",null,"The best way to start working with the DHTMLX Optimus framework is to create a simple application. "),Object(o.b)("h3",{id:"running-the-environment"},"Running the environment"),Object(o.b)("p",null,"To begin with, you should configure the environment for your project. "),Object(o.b)("p",null,"You can use a ready project with configured settings from ",Object(o.b)("a",{parentName:"p",href:"https://github.com/DHTMLX/optimus-demo-guide/tree/guide/first-step"},"GitHub"),". To run the project on the local server, use:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},"npm install\nnpm start\n")),Object(o.b)("p",null,"In other cases, DHTMLX Optimus can be added into your own project via the ",Object(o.b)("inlineCode",{parentName:"p"},"npm")," package manager. For that, run the following commands in your project directory:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},'to install "dhx-optimus":')),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},"npm i dhx-optimus\n")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},'to install the "dhx-optimus-store" state manager:')),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},"npm i dhx-optimus-store\n")),Object(o.b)("h3",{id:"creating-an-application"},"Creating an application"),Object(o.b)("p",null,"As all dependencies are installed, we can start creating our app. Let's use the ",Object(o.b)("a",{parentName:"p",href:"https://github.com/DHTMLX/optimus-demo-guide/tree/guide/first-step"},"project structure")," that is already defined."),Object(o.b)("p",null,"1","."," First, create a new ",Object(o.b)("em",{parentName:"p"},"index.html")," file in the ",Object(o.b)("em",{parentName:"p"},"src")," folder and define a container to render our app there: "),Object(o.b)("p",null,"{{snippet   src/index.html}}"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-html"},'<!DOCTYPE html>\n<html lang="en">\n    <head>\n        <title>dhtmlxOptimus guide</title>\n    </head>\n    <body>\n        {/* Create a container with the unique id */}\n        <section id="app" className="main__container"></section>\n    </body>\n</html>\n')),Object(o.b)("p",null,"2","."," Next, you need to create an ",Object(o.b)("em",{parentName:"p"},"index.js")," file - the entry point of the app. "),Object(o.b)("p",null,"{{snippet   src/index.js}}"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import "./../assets/css/index.css"; // import css styles\nimport { App } from "dhx-optimus";\n\nexport class MyApp extends App {}\n')),Object(o.b)("p",null,'Here we\'ve created the MyApp class that will render our application. The MyApp class is inherited from the App class included from the "dhx-optimus" library. '),Object(o.b)("p",null,"3","."," It's time to create our first View. For that, go to the ",Object(o.b)("em",{parentName:"p"},"views")," folder and create the ",Object(o.b)("em",{parentName:"p"},"TopLayout.js")," file there. "),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"We recommend that you use the capital letter at the beginning of the name of the file that have a view => TopLayout.js. This is the common practice."))),Object(o.b)("p",null,"{{snippet   src/views/TopLayout.js}}"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import { View } from "dhx-optimus";\n\nexport class TopLayout extends View {\n    init() {\n        return `<h1>Hello Optimus!</h1>`;\n    }\n}\n')),Object(o.b)("p",null,"As you can see, we've created the TopLayout class that is inherited from the View class included from the \"dhx-optimus\" library. To define the initial view, we've returned an HTML element in the ",Object(o.b)("strong",null,"init()")," method. "),Object(o.b)("p",null,"4","."," Now, you can render the just created view. To do that, include the view into the ",Object(o.b)("em",{parentName:"p"},"index.js")," file and render it via the ",Object(o.b)("strong",null,"show()")," method:"),Object(o.b)("p",null,"{{snippet   src/index.js}}"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import "./../assets/css/index.css";\n\nimport { App } from "dhx-optimus";\nimport { TopLayout } from "./views/TopLayout"; /*!*/\n\nexport class MyApp extends App {\n    init() { /*!*/\n        this.show(null, TopLayout); /*!*/\n    } /*!*/\n}\n')),Object(o.b)("p",null,"You can find more details on API methods ","[below]","(",Object(o.b)("strong",null,"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443"),")."),Object(o.b)("p",null,"5","."," Finally, initialize your application. Navigate to the ",Object(o.b)("em",{parentName:"p"},"index.html")," file and update its code with the following:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-html"},'<!DOCTYPE html>\n<html lang="en">\n    <head>\n        <title>dhtmlxOptimus guide</title>\n        {/* Suite */}\n        <script type="text/javascript" src="https://cdn.dhtmlx.com/suite/edge/suite.js"><\/script>\n        <link rel="stylesheet" href="https://cdn.dhtmlx.com/suite/edge/suite.css" />\n        {/* App */}\n        <script type="text/javascript" src="./app.js"><\/script>\n        <link rel="stylesheet" href="./app.css" />\n    </head>\n    <body>\n        <section id="app" className="main__container"></section>\n        <script>\n            const app = new optimusguide.MyApp();\n            app.render("#app");\n        <\/script>\n    </body>\n</html>\n')),Object(o.b)("p",null,"Everything is pretty straightforward here:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"include a free version of DHTMLX from our CDN. It is necessary to include files of DHTMLX Suite as  dependencies for correct work of DHTMLX Optimus;"),Object(o.b)("li",{parentName:"ul"},"include the ",Object(o.b)("em",{parentName:"li"},"app.js")," and ",Object(o.b)("em",{parentName:"li"},"app.css")," files to configure webpack;"),Object(o.b)("li",{parentName:"ul"},"initialize the app via the ",Object(o.b)("strong",null,"render()")," method that takes the ID of the container as a parameter.")),Object(o.b)("p",null,"Now, you can run the application:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},"npm start\n")),Object(o.b)("p",null,"Open ",Object(o.b)("em",{parentName:"p"},"http://localhost:8080/")," in your browser. The result should be like this:"),Object(o.b)("p",null,Object(o.b)("img",{src:n(1840).default})),Object(o.b)("p",null,"For a complete immersion in the world of DHTMLX Optimus, you can follow our ","[step-by-step guide]","(",Object(o.b)("strong",null,"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443"),"), which in just five steps will show you the principles of developing with DHTMLX Optimus at a professional level, which is suitable for both professionals and beginners in the world of JavaScript and DHTMLX."),Object(o.b)("h2",{id:"application-structure"},"Application Structure"),Object(o.b)("p",null,"You can create a structure of your own app via extending the existing classes. DHTMLX Optimus contains three main classes:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"#app_class"},"App class")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"#view_class"},"View class")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"#component_class"},"Component class"))),Object(o.b)("h3",{id:"app_class"},"App class"),Object(o.b)("p",null,"The App class is the main class of the application. "),Object(o.b)("p",null,"Note, that:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"A new app class is created via extending the App class;"),Object(o.b)("li",{parentName:"ul"},"The ",Object(o.b)("strong",null,"init()")," method defines the initial view to show;"),Object(o.b)("li",{parentName:"ul"},"The ",Object(o.b)("em",{parentName:"li"},"show()")," method allows rendering the main View of the app")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import { App } from "dhx-optimus";\nimport { TopLayout } from "./views/TopLayout";\n\nexport class MyApp extends App {\n    init() {\n        this.show(null, TopLayout);\n    }\n}\n')),Object(o.b)("h3",{id:"view_class"},"View class"),Object(o.b)("p",null,"View class ia a base class intended to create and hierarchically arrange different visual components, to add widgets of dhtmlxSuite library, and also to pass data to child components. "),Object(o.b)("p",null,"To create an application of the desired structure you need to be able to connect different views and set hierarchy of components on a page."),Object(o.b)("p",null,"Note, that:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"A new view class is inherited from the View class;"),Object(o.b)("li",{parentName:"ul"},"The ",Object(o.b)("strong",null,"init()")," method returns View either as an HTML element or as a DHTMLX widget;"),Object(o.b)("li",{parentName:"ul"},"The ",Object(o.b)("strong",null,"ready()")," method allows you to create the necessary logic after rendering View to the DOM and to get an HTML container of the rendered View as a parameter of the method"),Object(o.b)("li",{parentName:"ul"},"The ",Object(o.b)("strong",null,"destroy()")," method allows you to destroy your own views. DHTMLX Optimus destroys views automatically. The method can be useful when destroying the parts of your own logic.")),Object(o.b)("p",null,"Here are some examples:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"the example of View returned as an HTML element:")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import { View } from "dhx-optimus";\n\nexport class TopLayout extends View {\n    init() {\n        return `<h1>Hello Optimus!</h1>`;\n    }\n    ready(root) {\n        console.log(`This root container:`, root);\n    }\n}\n')),Object(o.b)("p",null,"As a result, the parent container of View will be returned to the console, as in:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-html"},'<section id="app" className="main__container">\n    <h1>Hello Optimus!</h1>\n</section>\n')),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"the example of View returned as a DHTMLX widget:")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import { View } from "dhx-optimus";\n\nexport class DataView extends View {\n    init() {\n        this.dataView = new dhx.DataView(null, {\n            data: this.params.dataCollection,\n            itemsInRow: 2,\n            gap: 20,\n            template: ({ name, post }) => `\n                <div className="personal-card">\n                    <div className="personal-card__container">\n                        <h3>${name}</h3>\n                        <p>${post}</p>\n                    </div>\n                </div>\n            `,\n        });\n        return this.dataView;\n    }\n}\n')),Object(o.b)("p",null,"The example is pretty simple. We've just initialized the dhtmlxDataView widget and returned it as a view."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"the example of View returned as a DHTMLX widget that contains several Views:")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import { View } from "dhx-optimus";\n\nimport { ToolbarView } from "./ToolbarView";\nimport { DataView } from "./content/DataView";\n\nexport class TopLayout extends View {\n    init() {\n        this.layout = new dhx.Layout(null, {\n            rows: [\n                {\n                    id: "toolbar",\n                    height: "content",\n                    init: cell => this.show(cell, ToolbarView),\n                },\n                {\n                    id: "content",\n                    init: cell => this.show(cell, DataView, {\n                        dataCollection: this.params.persons,\n                    }),\n                },\n            ],\n        });\n        return this.layout;\n    }\n}\n')),Object(o.b)("p",null,"The above sample shows that the dhtmlxLayout component possesses the ",Object(o.b)("em",{parentName:"p"},"init")," property. The property allows you to display View in the specified cell of the layout via the ",Object(o.b)("em",{parentName:"p"},"show()")," method in a short form."),Object(o.b)("p",null,"You can create any number of Views for your app and render them via the cells of dhtmlxLayout. For more details on API and useful properties of the DHTMLX widgets, see below. "),Object(o.b)("h3",{id:"component_class"},"Component class"),Object(o.b)("p",null,"Component class is a service class that intended to create additional logic of the app without its further rendering. A new component class is inherited from the Component class. "),Object(o.b)("p",null,"The advantages of the class inherited from the Component class are:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"the ability to use the event bus of the app;"),Object(o.b)("li",{parentName:"ul"},"the ability to exchange data;"),Object(o.b)("li",{parentName:"ul"},"the ability to destroy events automatically.")),Object(o.b)("p",null,"Let's consider the Component class on the example of DHTMLX Uploader:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import { Component } from "dhx-optimus";\n\nexport default class Uploader extends Component {\n    init() {\n        this.uploader = new dhx.Uploader({\n            target: this.params.target,\n        });\n        ...\n    }\n}\n')),Object(o.b)("p",null,"The above code shows that:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"the ",Object(o.b)("strong",null,"init()")," method does not return anything;"),Object(o.b)("li",{parentName:"ul"},"we've passed the additional parameter (",Object(o.b)("em",{parentName:"li"},"this.params.target"),") via the parent component.")),Object(o.b)("p",null,"The Component class also provides access to the events of the app via the ",Object(o.b)("strong",null,"fire()"),", ",Object(o.b)("strong",null,"on()")," methods. See more details below."),Object(o.b)("p",null,"The following example shows that it is possible to use the class inherited from the Component class by calling it in the class inherited from the App class via the ",Object(o.b)("strong",null,"use(component, params)")," method."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import { App } from "dhx-optimus";\n\nimport TopLayout from "./views/TopLayout";\nimport Uploader from "./components/Uploader";\n\nexport class FileExplorer extends App {\n    init() {\n        ...\n\n        this.show(null, TopLayout, { folders: this.folders });\n        this.use(Uploader, { target: "./backend/upload"});\n\n        ...\n    }\n}\n')),Object(o.b)("h2",{id:"subscribing-to-global-events"},"Subscribing to global events"),Object(o.b)("p",null,"Subscribing to a global event allows tracking changes made in a component. You can register an event handler to a global event bus and define a function to be triggered when the event is fired. "),Object(o.b)("p",null,"Let's consider an example. We want to display different content in the View, based on the button selected in the toolbar. For that, we will use the global event bus."),Object(o.b)("p",null,"To subscribe to the global ",Object(o.b)("strong",null,"viewChange")," event, we'll apply the ",Object(o.b)("em",{parentName:"p"},"this.on()")," method:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import { View } from "dhx-optimus";\n\nimport { ToolbarView } from "./ToolbarView";\nimport { EmptyView } from "./EmptyView";\n\nexport class TopLayout extends View {\n    init() {\n        return (this.layout = new dhx.Layout(null, {\n            rows: [\n                {\n                    id: "toolbar",\n                    height: "content",\n                    init: cell => this.show(cell, ToolbarView),\n                },\n                {\n                    id: "content",\n                    init: cell => this.show(cell, EmptyView),\n                },\n            ],\n        }));\n    }\n\n    ready() {\n        this.on("viewChange", id => { /*!*/\n            this.show(this.layout.getCell("content"), EmptyView, { content: id }); /*!*/\n        }); /*!*/\n    }\n}\n')),Object(o.b)("p",null,"The event will change the views via the ",Object(o.b)("em",{parentName:"p"},"this.show()")," method."),Object(o.b)("p",null,"We'll use the ",Object(o.b)("em",{parentName:"p"},"this.fire()")," API to call the ",Object(o.b)("strong",null,"viewChange")," event:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import { View } from "dhx-optimus";\n\nexport class ToolbarView extends View {\n    init() {\n        return (this.toolbar = new dhx.Toolbar(null, {\n            css: "toolbar",\n            data: [\n                {\n                    type: "spacer",\n                },\n                {\n                    id: "first",\n                    value: "First",\n                    group: "views",\n                },\n                {\n                    id: "second",\n                    value: "Second",\n                    group: "views",\n                },\n                {\n                    id: "third",\n                    value: "Third",\n                    group: "views",\n                },\n                {\n                    type: "spacer",\n                },\n            ],\n        }));\n    }\n\n    ready() {\n        this.toolbar.events.on("click", id => {\n            this.fire("viewChange", [id]); /*!*/\n        });\n    }\n}\n')),Object(o.b)("p",null,"As you can see, whenever the user clicks the button in the toolbar, the ",Object(o.b)("em",{parentName:"p"},"this.fire()")," method will be called and the handler will be executed."),Object(o.b)("p",null,"We should also pass the changed state to the child component:  "),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import { View } from "dhx-optimus";\n\nexport class EmptyView extends View {\n    init() {\n        return `\n            <div className="empty__container">\n                This is ${this.params.content || "empty"} view\n            </div>`;\n    }\n}\n')),Object(o.b)("p",null,"Here we are! After clicking the button in the toolbar, the necessary content will be displayed in the View. "),Object(o.b)("br",null),"The following code sample shows that the global event can be available from any point of the application:",Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import { App } from "dhx-optimus";\nimport { TopLayout } from "./views/TopLayout";\n\nexport class MyApp extends App {\n    init() {\n        this.show(null, TopLayout);\n\n        this.on("viewChange", id => {\n            console.log("You clicked on:", id);\n        });\n    }\n}\n')),Object(o.b)("h2",{id:"passing-data-to-child-components"},"Passing data to child components"),Object(o.b)("p",null,"There is a possibility to pass data from parent components to the child components. It allows configuring the child components within the context of the parent ones or changing configuration of the child depending on the parent's state."),Object(o.b)("p",null,"Let's take a look at the above code snippet:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import { View } from "dhx-optimus";\n\n...\n\nexport class TopLayout extends View {\n    init() {\n        ...\n    }\n\n    ready() {\n        this.on("viewChange", id => {\n            this.show(this.layout.getCell("content"), EmptyView, { content: id });\n        });\n    }\n}\n')),Object(o.b)("p",null,"We've added an event handler to the ",Object(o.b)("strong",null,"viewChange")," event of the global event bus. When the id is changed, the ",Object(o.b)("strong",null,"show(target, view, params)")," method is called. The method takes 3 parameters, but we're interested in the last one. It allows passing an object with the necessary parameters. For instance:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'this.show(this.layout.getCell("content"), EmptyView, { content: id });\n')),Object(o.b)("p",null,"It is possible to get this parameter in the child component:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import { View } from "dhx-optimus";\n\nexport class EmptyView extends View {\n    init() {\n        return `\n            <div className="empty__container">\n                This is ${this.params.content} view\n            </div>`;\n    }\n}\n')),Object(o.b)("h2",{id:"initializing-the-apps-global-state"},"Initializing the app's global state"),Object(o.b)("p",null,"It is also possible to use the App class for exchanging data between components via initializing ",Object(o.b)("em",{parentName:"p"},"Observable Store")," which allows managing the global state of the application. To be able to access to the state you need to create a global store and subscribe to its changes."),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"The code example below demonstrates the part of the application sample. The full code is available on ",Object(o.b)("a",{parentName:"p",href:"https://github.com/DHTMLX/optimus-demo-guide/tree/guide/third-step"},"GitHub"),". "))),Object(o.b)("p",null,"Let's consider how you can create a global store, retrieve the store state and use it in your app."),Object(o.b)("p",null,"At first, we'll initialize the global state of the app in the App class via creating a global store and subscribing to store changes. To retrieve the current state of the store, we'll use the ",Object(o.b)("strong",null,"getState()")," method."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import { App } from "dhx-optimus";\nimport Store from "dhx-optimus-store";\n\nimport { TopLayout } from "./views/TopLayout";\n\nconst initialState = {\n    active: "first",\n};\n\nexport class MyApp extends App {\n    init() {\n        // create a global store\n        this.store = new Store(initialState);\n        this.params.store = this.store;\n        this.state = this.store.getState();\n\n        this.show(null, TopLayout);\n\n        // subscribe to Store changes\n        this.on("viewChange", id => {\n            this.state.active = id;\n        });\n    }\n}\n')),Object(o.b)("p",null,"Now, we'll use the toolbar component to generate the changes of the state. The ",Object(o.b)("em",{parentName:"p"},"fire()")," method will call the handler each time the user clicks the button in the toolbar: "),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import { View } from "dhx-optimus";\n\nexport class ToolbarView extends View {\n    init() {\n        return (this.toolbar = new dhx.Toolbar(null, {...}));\n    }\n\n    ready() {\n        this.observe(\n            state => state.active,\n            active => {\n                this.toolbar.data.update(active, { active: true });\n            }\n        );\n\n        this.toolbar.events.on("click", id => {\n            this.fire("viewChange", [id]);\n        });\n    }\n}\n')),Object(o.b)("p",null,"The above code implements the following logic:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"each time the user clicks the button in the toolbar, the ",Object(o.b)("strong",null,"viewChange")," event will be called in the ToolbarView class via the ",Object(o.b)("em",{parentName:"li"},"fire")," method;"),Object(o.b)("li",{parentName:"ul"},"the id of the button pressed in the toolbar will be passed to the ",Object(o.b)("em",{parentName:"li"},"fire")," method;"),Object(o.b)("li",{parentName:"ul"},"the state will be changed via the global ",Object(o.b)("strong",null,"viewChange"),' event in the MyApp class. The current state will be assigned to the "active" global state by the id of the toolbar button.')),Object(o.b)("p",null,"Using the ",Object(o.b)("strong",null,"observe")," method helps to asynchronously observe the changes made to the global store from any point of the application:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import { View } from "dhx-optimus";\n\nimport { ToolbarView } from "./ToolbarView";\nimport { EmptyView } from "./EmptyView";\n\nexport class TopLayout extends View {\n    init() {\n        return (this.layout = new dhx.Layout(null, {...}));\n    }\n\n    ready() {\n        this.observe(\n            state => state.active,\n            active => {\n              this.show(this.layout.getCell("content"), EmptyView, {content: active});\n            }\n        );\n    }\n}\n')),Object(o.b)("h2",{id:"working-with-dhtmlxsuites-widgets"},"Working with dhtmlxSuite's widgets"),Object(o.b)("p",null,"Using Optimus framework you can easily build your app based on the components of the dhtmlxSuite library."),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"You can create your first app built with DHTMLX Optimus with the help of our ","[step-by-step]","(",Object(o.b)("strong",null,"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443"),") guide."))),Object(o.b)("p",null,"DHTMLX Optimus automatically destroys components and events, so you can not worry about the life cycle of the component. "),Object(o.b)("p",null,"The framework is intended to build DHTMLX-based apps easier and faster. Thus, you just need to follow the main principles of work with the Optimus framework that are given below."),Object(o.b)("h3",{id:"initialization-of-the-dhtmlxsuite-components"},"Initialization of the dhtmlxSuite components"),Object(o.b)("p",null,"In most cases creating a View based on the component of the dhtmlxSuite library is pretty simple:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import { View } from "dhx-optimus";\n\nexport class CalendarView extends View {\n    init() {\n        return new dhx.Calendar(null, {\n            value: new Date,\n        });\n    }\n    ready() {\n        console.log("Calendar is ready");\n    }\n    destroy() {\n        console.log("Calendar is destroy");\n    }\n}\n')),Object(o.b)("p",null,"In the above example, we've initialized the view that returns dhtmlxCalendar. "),Object(o.b)("p",null,"Let's consider the code in detail:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"the ",Object(o.b)("strong",null,"init()")," method returns the configured DHTMLX Calendar;"),Object(o.b)("li",{parentName:"ul"},"the ",Object(o.b)("strong",null,"ready()")," method will be called after the View is rendered in a DOM tree. You can implement your own logic and don't be afraid that the component has not been rendered yet;"),Object(o.b)("li",{parentName:"ul"},"the ",Object(o.b)("strong",null,"destroy()")," method will be called after deleting the View from the DOM tree. At this moment, Optimus destroys the DHTMLX components. You can also describe your own logic here if needed. ")),Object(o.b)("h3",{id:"initialization-of-the-dhtmlxwindow-component"},"Initialization of the dhtmlxWindow component"),Object(o.b)("p",null,"Creating a dhtmlxWindow-based View is similar to creating a View based on the other dhtmlxSuite components. There is only difference in rendering of the View. "),Object(o.b)("p",null,"Let's modify our above sample. We'll create a dhtmlxWindow-based View and render it in the TopLayout view."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import { View } from "dhx-optimus";\n\nexport class WindowView extends View {\n    init() {\n        return this.window = new dhx.Window({\n            title: "DHX Window",\n            resizable: true,\n            movable: true\n        });\n    }\n    ready() {\n        console.log("DHX Window is ready");\n    }\n    destroy() {\n        console.log("DHX Window is destroy");\n    }\n}\n')),Object(o.b)("p",null,"Here you can see that the initialization of the dhtmlxWindow component is the same as initialization of the other components."),Object(o.b)("p",null,"Rendering of the dhtmlxWindow-based View will look like this:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import { View } from "dhx-optimus";\n...\nimport { WindowView } from "./WindowView";\n...\nexport class TopLayout extends View {\n    init() {\n        return (this.layout = new dhx.Layout(null, {...}));\n    }\n\n    ready() {\n        ...\n        this.show(null, WindowView);\n    }\n}\n')),Object(o.b)("p",null,"Now we'll update the code of ",Object(o.b)("em",{parentName:"p"},"WindowView")," and apply the ",Object(o.b)("strong",null,"observe()")," method to listen the changes made to the global state. As a result, the  ",Object(o.b)("em",{parentName:"p"},"WindowView")," will be rendered when switching to the second page of the app:  "),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import { View } from "dhx-optimus";\n\nexport class WindowView extends View {\n    init() {\n        return this.window = new dhx.Window({ ... });\n    }\n    ready() {\n        console.log("DHX Window is ready");\n        this.observe(\n            state => state.active,\n            active => {\n                if (active === "second") {\n                    this.window.show();\n                } else {\n                    this.window.hide();\n                }\n            }\n        );\n    }\n    destroy() { ... }\n}\n')),Object(o.b)("p",null,"Thus, it is possible to display the dhtmlxWindow-based View in any necessary View."),Object(o.b)("h3",{id:"initialization-of-the-dhtmlxlayout-component"},"Initialization of the dhtmlxLayout component"),Object(o.b)("p",null,"Let's consider 3 method of rendering a View via the ",Object(o.b)("strong",null,"show()")," method, one of which implies rendering of the View directly in the DHTMLX Layout component:"),Object(o.b)("p",null,"1","."," It is possible to render views with the help of the ",Object(o.b)("strong",null,"show()")," method:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import { View } from "dhx-optimus";\n\nimport { ToolbarView } from "./ToolbarView";\nimport { EmptyView } from "./EmptyView";\n\nexport class TopLayout extends View {\n    init() {\n        this.layout = new dhx.Layout(null, {\n            rows: [\n                {\n                    id: "toolbar",\n                    height: "content",\n                },\n                {\n                    id: "content",\n                }\n            ]\n        });\n\n        this.show(this.layout.getCell("toolbar"), ToolbarView); /*!*/\n        this.show(this.layout.getCell("content"), EmptyView); /*!*/\n\n        return this.layout;\n    }\n}\n')),Object(o.b)("p",null,"2","."," It is possible to call the ",Object(o.b)("strong",null,"show()")," method right in the layout via the ",Object(o.b)("em",{parentName:"p"},"init")," option. The option returns the current Layout cell as a parameter. You can use this way when you need to get the static layout without changing the view."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import { View } from "dhx-optimus";\n\nimport { ToolbarView } from "./ToolbarView";\nimport { EmptyView } from "./EmptyView";\n\nexport class TopLayout extends View {\n    init() {\n        return new dhx.Layout(null, {\n            rows: [\n                {\n                    id: "toolbar",\n                    height: "content",\n                    init: cell => this.show(cell, ToolbarView),\n                },\n                {\n                    id: "content",\n                    init: cell = this.show(cell, EmptyView)\n                }\n            ]\n        });\n    }\n}\n')),Object(o.b)("p",null,"3","."," You can also combine the above two methods if you need to change views in the Layout cell:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'import { View } from "dhx-optimus";\n\nimport { ToolbarView } from "./ToolbarView";\nimport { DataView } from "./content/DataView";\nimport { ChartView } from "./content/ChartView";\nimport { GridView } from "./content/GridView";\n\nexport class TopLayout extends View {\n    init() {\n        return (this.layout = new dhx.Layout(null, {\n            rows: [\n                {\n                    id: "toolbar",\n                    height: "content",\n                    init: cell => this.show(cell, ToolbarView),\n                },\n                {\n                    id: "content",\n                }\n            ]\n        }));\n    }\n\n    ready() {\n        this.observe(\n            state => state.active,\n            active => {\n                switch (active) {\n                    case "first":\n                        this.show(this.layout.getCell("content"), DataView);\n                        break;\n                    case "second":\n                        this.show(this.layout.getCell("content"), ChartView);\n                        break;\n                    case "third":\n                        this.show(this.layout.getCell("content"), GridView);\n                        break;\n                }\n            }\n        );\n    }\n}\n')),Object(o.b)("h2",{id:"api"},"API"),Object(o.b)("p",null,"The DHTMLX Optimus provides the following API methods that are available from any point of the app:"),Object(o.b)("table",{className:"webixdoc_links"},Object(o.b)("tbody",null,Object(o.b)("tr",null,Object(o.b)("td",{className:"webixdoc_links0"},Object(o.b)("b",null,"show()")),Object(o.b)("td",null,"shows the specified view in a cell of the app. It takes three parameters:",Object(o.b)("ul",null,Object(o.b)("li",null,Object(o.b)("b",null,"cell")," - (",Object(o.b)("i",null,"object|null"),") a reference to the cell to render the view inside, or the unique selector of a container element "),Object(o.b)("li",null,Object(o.b)("b",null,"view")," - constructor of the view to show"),Object(o.b)("li",null,Object(o.b)("b",null,"params")," - (",Object(o.b)("i",null,"object"),") optional, parameters to pass from the parent view to the child views")))),Object(o.b)("tr",null,Object(o.b)("td",{className:"webixdoc_links0"},Object(o.b)("b",null,"use()")),Object(o.b)("td",null,"initializes Component. It takes 2 parameters:",Object(o.b)("ul",null,Object(o.b)("li",null,Object(o.b)("b",null,"component")," - constructor of the component"),Object(o.b)("li",null,Object(o.b)("b",null,"params")," - (",Object(o.b)("i",null,"object"),") optional, an object with additional parameters")))),Object(o.b)("tr",null,Object(o.b)("td",{className:"webixdoc_links0"},Object(o.b)("b",null,"on()")),Object(o.b)("td",null,"registers an event handler to a global event bus. It takes 2 parameters:",Object(o.b)("ul",null,Object(o.b)("li",null,Object(o.b)("b",null,"name")," - (",Object(o.b)("i",null,"string"),") the name of the event"),Object(o.b)("li",null,Object(o.b)("b",null,"handler")," - (",Object(o.b)("i",null,"function"),") a user-defined event handler")))),Object(o.b)("tr",null,Object(o.b)("td",{className:"webixdoc_links0"},Object(o.b)("b",null,"fire()")),Object(o.b)("td",null,"calls an event handler of the global event bus. It takes 2 parameters:",Object(o.b)("ul",null,Object(o.b)("li",null,Object(o.b)("b",null,"name")," - (",Object(o.b)("i",null,"string"),") the name of the event"),Object(o.b)("li",null,Object(o.b)("b",null,"params")," - (",Object(o.b)("i",null,"array"),") an array of the related data of the event")))),Object(o.b)("tr",null,Object(o.b)("td",{className:"webixdoc_links0"},Object(o.b)("b",null,"detach()")),Object(o.b)("td",null,"unsubscribes an event handler from the global event bus. It takes one parameter:",Object(o.b)("ul",null,Object(o.b)("li",null,Object(o.b)("b",null,"name")," - (",Object(o.b)("i",null,"string"),") the event name")))))),Object(o.b)("h3",{id:"methods-used-inside-the-classes"},"Methods used inside the classes"),Object(o.b)("p",null,"The ",Object(o.b)("em",{parentName:"p"},"App's")," constructor provides the following method:"),Object(o.b)("table",{className:"webixdoc_links"},Object(o.b)("tbody",null,Object(o.b)("tr",null,Object(o.b)("td",{className:"webixdoc_links0"},Object(o.b)("b",null,"init()")),Object(o.b)("td",null,"mandatory, allows initializing available views and logic of components. For more details, see the ",Object(o.b)("a",{href:"optimus/index.md#app_class"},"App class"),".")))),Object(o.b)("br",null),"The *Component's* constructor provides the following methods:",Object(o.b)("table",{className:"webixdoc_links"},Object(o.b)("tbody",null,Object(o.b)("tr",null,Object(o.b)("td",{className:"webixdoc_links0"},Object(o.b)("b",null,"init()")),Object(o.b)("td",null,"mandatory, allows initializing the logic of the Component. This logic will be called on the initialization of the Component. For more details, see the ",Object(o.b)("a",{href:"optimus/index.md#component_class"},"Component class"),".")),Object(o.b)("tr",null,Object(o.b)("td",{className:"webixdoc_links0"},Object(o.b)("b",null,"destroy()")),Object(o.b)("td",null,"the method is called on destroying the Component")))),Object(o.b)("br",null),"The *View's* constructor provides the following methods:",Object(o.b)("table",{className:"webixdoc_links"},Object(o.b)("tbody",null,Object(o.b)("tr",null,Object(o.b)("td",{className:"webixdoc_links0"},Object(o.b)("b",null,"init(): string|DHXWidget")),Object(o.b)("td",null,"obligatory, allows initializing and returning the view. For more details, see the ",Object(o.b)("a",{href:"optimus/index.md#view_class"},"View class"),".")),Object(o.b)("tr",null,Object(o.b)("td",{className:"webixdoc_links0"},Object(o.b)("b",null,"ready()")),Object(o.b)("td",null,"allows implementing an additional logic after rendering View to DOM. It takes one parameter:",Object(o.b)("ul",null,Object(o.b)("li",null,Object(o.b)("b",null,"root")," - (",Object(o.b)("i",null,"HTMLElement"),") returns an HTML element of the parent container of the view ")))),Object(o.b)("tr",null,Object(o.b)("td",{className:"webixdoc_links0"},Object(o.b)("b",null,"destroy()")),Object(o.b)("td",null,"allows implementing an additional logic on destroying the component, and unmounts the View from DOM. In most cases, you don't need use this method, as the views based on the DHTMLX widgets are destroyed automatically.")))),Object(o.b)("br",null),"The *App's* constructor also provides the method that can be called outside the application:",Object(o.b)("table",{className:"webixdoc_links"},Object(o.b)("tbody",null,Object(o.b)("tr",null,Object(o.b)("td",{className:"webixdoc_links0"},Object(o.b)("b",null,"render()")),Object(o.b)("td",null,"renders an application inside the specified container. It takes one parameter:",Object(o.b)("ul",null,Object(o.b)("li",null,Object(o.b)("b",null,"container")," - (",Object(o.b)("i",null,"string|cell|HTMLElement"),") the container where the app will be rendered")))))))}b.isMDXComponent=!0}}]);