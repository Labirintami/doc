(window.webpackJsonp=window.webpackJsonp||[]).push([[1065],{1124:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return o})),n.d(t,"default",(function(){return d}));var a=n(2),i=n(6),r=(n(0),n(1808)),l={sidebar_label:"Loading Big Datasets",title:"Loading Big Datasets"},s={unversionedId:"tree/increasing_tree_s_performance",id:"tree/increasing_tree_s_performance",isDocsHomePage:!1,title:"Loading Big Datasets",description:"`tododelete \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f?`",source:"@site/docs/tree/increasing_tree_s_performance.md",slug:"/tree/increasing_tree_s_performance",permalink:"/tree/increasing_tree_s_performance",editUrl:"https://github.com/Labirintami/doc/edit/master/docs/tree/increasing_tree_s_performance.md",version:"current",sidebar_label:"Loading Big Datasets"},o=[{value:"Dynamic Loading",id:"dynamic-loading",children:[]},{value:"Smart XML Parsing",id:"smart-xml-parsing",children:[]},{value:"Distributed Parsing",id:"distributed-parsing",children:[]}],c={rightToc:o};function d(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"tododelete \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f?")," "),Object(r.b)("p",null,"The following ways of increasing performance when working with huge data sets are introduced in dhtmlxTree:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",{parentName:"li",href:"/tree/increasing_tree_s_performance#dynamicloading"},"Dynamic Loading"),";"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",{parentName:"li",href:"/tree/increasing_tree_s_performance#smartxmlparsing"},"Smart XML Parsing"),";"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",{parentName:"li",href:"/tree/increasing_tree_s_performance#distributedparsing"},"Distributed Parsing"),".")),Object(r.b)("h2",{id:"dynamic-loading"},"Dynamic Loading"),Object(r.b)("p",null,"In case Tree contains large amount of nodes (or the user doesn't want to waste time on loading hidden nodes),\nit would be better to load them on request, not all at once. "),Object(r.b)("p",null,"The functionality to load tree's levels dynamically using XML was introduced for this purpose.\nDynamic loading of items from XML stream gives the possibility to create DHTML trees with unlimited number of nodes."),Object(r.b)("h3",{id:"dynload"},"Activating Dynamic Loading"),Object(r.b)("p",null,'Firstly, the user should indicate in XML the nodes that will be loaded dynamically in this way: add the parameter child="1" to all nodes that have child items.\nThe items containing this parameter will be the objects for dynamic loading.'),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="iso-8859-1" ?>\n    <tree id="0">\n        <item  text="Surveillance" id="a1" im0="book.gif" \u2026 child="1"/>\n        <item \u2026/>\n        \u2026\n    </tree>\n')),Object(r.b)("p",null,"The api/dhtmlxtree_setxmlautoloading.md method switches the dynamic loading on in the tree:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},"tree.setXMLAutoLoading(url);\ntree.load(file); // load the first level of the tree\n")),Object(r.b)("p",null,"The above mentioned snippet is useful in case of a tree with large amount of data. "),Object(r.b)("p",null,"The system will firstly load the data indicated by the ",Object(r.b)("em",{parentName:"p"},"load()")," method."),Object(r.b)("p",null,"The script specified in the ",Object(r.b)("em",{parentName:"p"},"setXMLAutoLoading()")," method will be called when the user clicks the tree to expand any of the parent nodes\n(the child nodes of which have not been loaded). The script will get the id of the node to open, and return an XML with the description of child items."),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},"When dynamic loading is switched on in the tree, script methods work only for those items that are loaded at the moment."))),Object(r.b)("p",null,"{{sample\ndhtmlxTree/samples/12_loading_processing_data/13_tree_dyn_loading.html\n}}"),Object(r.b)("h3",{id:"loadbehavior"},"Setting Auto Loading Behavior"),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},"This functionality is available in the PRO version only."))),Object(r.b)("p",null,"The api/dhtmlxtree_setxmlautoloadingbehaviour.md method is responsible for specifying the way according\nto which the server-side URL is constructed during dynamic loading calls:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},"tree.setXMLAutoLoadingBehaviour(mode);    \n")),Object(r.b)("p",null,"The following ",Object(r.b)("em",{parentName:"p"},"mode")," options are available here:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",null,"id")," - (default) some_script?id=[item_id]"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",null,"function")," - used for calling a user-defined handler that should be set as a parameter of the setXMLAutoLoading() method (see example below)"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",null,"name")," - some_script[item_id]"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",null,"xmlname"),"  - some_script[item_id].xml")),Object(r.b)("p",null,"An example of using the ",Object(r.b)("em",{parentName:"p"},"function")," mode may look as follows:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},'tree.setXMLAutoLoadingBehavior("function");\ntree.setXMLAutoLoading(function(id){\n    tree.load("some.php?id="+id)\n})\n')),Object(r.b)("p",null,"In this mode the ",Object(r.b)("em",{parentName:"p"},"setXMLAutoLoading()")," method receives a function that sends a request to the script to load the content of the clicked item by its id.\nThe ",Object(r.b)("em",{parentName:"p"},"load()")," method called inside of this function returns an XML with the description of child items of the clicked item."),Object(r.b)("p",null,"{{sample\ndhtmlxTree/samples/12_loading_processing_data/03_pro_dyn_operations.html\n}}"),Object(r.b)("p",null,"###Setting Escaping Mode "),Object(r.b)("p",null,"The setEscapingMode() method is responsible for setting the escaping mode (used for escaping id in requests).\nThis method sets the mode for transferring the information of tree's item to the server:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},"tree.setEscapingMode(mode);\n")),Object(r.b)("p",null,"The following modes are available:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",null,"default")," - uses native escape functionality of the browser;"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",null,"utf8")," - is used for UTF escaping;"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",null,"none")," - data is not escaped.")),Object(r.b)("h2",{id:"smart-xml-parsing"},"Smart XML Parsing"),Object(r.b)("p",null,"The idea of Smart XML Parsing is simple: the entire tree structure is loaded on the client side, but only the nodes that should be displayed are rendered.\nIt helps to decrease the loading time\nand enhance the general performance of large trees greatly. Plus, the entire tree structure is available for most of the script methods\n(for example, searching is performed through all the nodes, not only through the rendered ones)."),Object(r.b)("p",null,"###Activating Smart XML Parsing "),Object(r.b)("p",null,"To activate Smart XML Parsing the user should apply the following method:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},"tree.enableSmartXMLParsing(true); // false is used to disable\n")),Object(r.b)("p",null,"Please, pay attention to the fact that Smart XML Parsing does not work in case of loading a fully expanded tree."),Object(r.b)("p",null,"{{sample\ndhtmlxTree/samples/12_loading_processing_data/10_pro_smart_parsing.html\n}}"),Object(r.b)("p",null,"###Getting Parsing State "),Object(r.b)("p",null,"The parsing state can be got by means of the getItemParsingState() method which takes an item's id as the parameter:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},"var state = tree.getItemParsingState(itemId); \n")),Object(r.b)("p",null,"The method returns:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("em",{parentName:"li"},"1")," - the item is already parsed;"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("em",{parentName:"li"},"0")," - the item is not parsed yet;"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("em",{parentName:"li"},"-1")," - the item's parsing is in process.")),Object(r.b)("h2",{id:"distributed-parsing"},"Distributed Parsing"),Object(r.b)("p",null,"Another way of increasing the performance of the tree with some levels containing more than 100-200 nodes per level is introduced. This functionality is called Distributed Parsing. "),Object(r.b)("p",null,"The main advantage of this functionality lies in making a level visible and ready to use before it is completely parsed.\nThus, items are loaded portion by portion with some timeouts."),Object(r.b)("p",null,"###Activating Distributed Parsing "),Object(r.b)("p",null,"To enable this functionality the user should make use of the following JS command:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},"tree.enableDistributedParsing(mode,count,delay);\n")),Object(r.b)("p",null,"Parameters of this method are:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",null,"mode")," - (true/false) enable/disable Distributed Parsing"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",null,"count")," - number of nodes per portion (optional parameter);"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",null,"delay")," - delay between portions parsing, set in milliseconds (optional parameter).")),Object(r.b)("p",null,"This functionaity is fully compatible with Smart XML Parsing."),Object(r.b)("p",null,"{{sample\ndhtmlxTree/samples/12_loading_processing_data/02_pro_dist_load.html\n}}"),Object(r.b)("p",null,"###Getting Parsing State "),Object(r.b)("p",null,"The current state of Distributed Parsing can be easily got in the following way:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},"var state = tree.getDistributedParsingState(); // returns true/false \n")),Object(r.b)("p",null,"This method returns either ",Object(r.b)("strong",null,"true")," (meaning that parsing is still in progress) or ",Object(r.b)("strong",null,"false")," (meaning that parsing is already finished)."))}d.isMDXComponent=!0}}]);