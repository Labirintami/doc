(window.webpackJsonp=window.webpackJsonp||[]).push([[675],{734:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return d})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return c}));var i=n(2),o=n(6),a=(n(0),n(1808)),d={sidebar_label:"Step 6. Edit Data in the Grid",title:"Step 6. Edit Data in the Grid"},l={unversionedId:"tutorial/binding_components/step6",id:"tutorial/binding_components/step6",isDocsHomePage:!1,title:"Step 6. Edit Data in the Grid",description:"We've already studied how to add and display components on the page.",source:"@site/docs/tutorial/binding_components/step6.md",slug:"/tutorial/binding_components/step6",permalink:"/tutorial/binding_components/step6",editUrl:"https://github.com/Labirintami/doc/edit/master/docs/tutorial/binding_components/step6.md",version:"current",sidebar_label:"Step 6. Edit Data in the Grid"},s=[{value:"Getting the result",id:"getting-the-result",children:[]}],r={rightToc:s};function c(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(i.a)({},r,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"We've already studied how to add and display components on the page. "),Object(a.b)("p",null,"The last part of this tutorial will teach you how to bind Grid to Toolbar, Window and ContextMenu to make it possible to edit data of the grid. "),Object(a.b)("p",null,"To implement interaction between Grid and other components we will use custom functions described below."),Object(a.b)("p",null,"##Creating custom functions"),Object(a.b)("p",null,"In this step we consider how to perform particular tasks, such as adding, editing and removing tasks. As we will need these solutions in several occasions, it is convenient to use functions."),Object(a.b)("p",null,"###openAddWindow() function"),Object(a.b)("p",null,"The first function we will describe is used for adding a new item. The function will perform the following actions:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},'assign the "Adding item" title to the window'),Object(a.b)("li",{parentName:"ul"},"clear the form"),Object(a.b)("li",{parentName:"ul"},"show a window on a page")),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-js"},'function openAddWindow(){\n    dhxWindow.header.data.update("title", {value: "Adding item"});\n    form.clear();\n    dhxWindow.show();\n};\n')),Object(a.b)("img",{style:{margin:"12px"},src:"tutorial/binding_components/adding_item.png"}),Object(a.b)("p",null,"###openEditWindow() function"),Object(a.b)("p",null,"In our app we consider several ways to open the editing window. They are:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"double-clicking on a row in the grid"),Object(a.b)("li",{parentName:"ul"},'pressing the "Edit" button in the toolbar'),Object(a.b)("li",{parentName:"ul"},'pressing the "Edit" item in the ContextMenu')),Object(a.b)("p",null,"In all these cases we'll call the ",Object(a.b)("strong",null,"openEditWindow")," function to display the edit window on the page. "),Object(a.b)("img",{style:{margin:"12px"},src:"tutorial/binding_components/editing_item.png"}),Object(a.b)("p",null,"All fields of the form inside the window will be filled with data from a selected grid row. If no row is selected in the grid, all data for the window will be selected from the 1st row of the grid."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-js"},'function openEditWindow(row){\n    // assigns the "Editing item" title to the window\n    dhxWindow.header.data.update("title", {value: "Editing item"});   \n    form.clear(); //clears both form values and validation\n    if (!row){ // checks whether any row is selected\n        var itemId = grid.data.getId(0); // returns the id of the item by its index\n        grid.selection.setCell(itemId); // sets a selection on a grid row by its Id\n        row = grid.data.getItem(itemId); // returns the object of the item (row) by id\n    }\n           \n    form.setValue(row); // sets values of the selected row in the form fields\n            \n    dhxWindow.show(); // shows a window on a page\n};\n')),Object(a.b)("p",null,"###deleteItem() function"),Object(a.b)("p",null,"Now, let's add a function to remove rows from the grid. The logic of the function is shown below:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-js"},"function deleteItem() {\n    // returns a cell of the selected row\n    var item = grid.selection.getCell();\n    // returns the index of the selected item by its Id\n    var index = grid.data.getIndex(item.row.id);\n    // deletes an item from the grid by its Id\n    grid.data.remove(item.row.id);\n    // defines the index of the position to which the new item will be put \n    index = index > grid.data.getLength() - 1 ? grid.data.getLength() - 1 : index; \n    // gets the id of an item by its index and sets selection on this item\n    grid.selection.setCell(grid.data.getId(index));     \n};\n")),Object(a.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(a.b)("div",{parentName:"div",className:"admonition-heading"},Object(a.b)("h5",{parentName:"div"},Object(a.b)("span",{parentName:"h5",className:"admonition-icon"},Object(a.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(a.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(a.b)("div",{parentName:"div",className:"admonition-content"},Object(a.b)("p",{parentName:"div"},"To make sure that after deleting the item, selection is automatically set to the next item, we need to check whether the deleted item was the last one in the array. "))),Object(a.b)("p",null,"With the help of the ",Object(a.b)("strong",null,"getLength()")," method we find out the length of the array. After that we compare the array length and the deleted item index.\nIf it was the last item, selection is set to the new item, which is currently the last item in the array. Otherwise, we set selection to the new item, which replaces the deleted item."),Object(a.b)("strong",null,"The custom functions, that we've described above, will be used below to edit grid with the help of other components."),Object(a.b)("p",null,"##Linking Toolbar Buttons and Grid"),Object(a.b)("p",null,"We've ",Object(a.b)("a",{parentName:"p",href:"/tutorial/basic_application/step5"},"already discussed")," how to bind Toolbar to Grid via the ",Object(a.b)("strong",null,"Click")," event of the Toolbar.\nSo we suggest to bind the buttons added in the ",Object(a.b)("a",{parentName:"p",href:"/tutorial/binding_components/step5"},"previous step")," to Grid in the same way."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-js"},"// id - the Id of the toolbar button, \n// e - the default mouse event of a browser \ntoolbar.events.on(\"Click\", function(id,e){\n    switch(id) {\n        case 'add': {\n            openAddWindow();            \n            break;\n        }\n        case 'edit': {\n            row = grid.selection.getCell().row; \n            //to define a row, a cell of which is selected\n            openEditWindow(row);            \n            break;\n        }\n        case 'delete': {\n            deleteItem();               \n            break;\n        }  \n    }\n});\n")),Object(a.b)("p",null,"For details about Toolbar events, see the ",Object(a.b)("a",{parentName:"p",href:"/toolbar/handling_events"},"Event Handling")," article.  "),Object(a.b)("p",null,"##Linking Window and Grid"),Object(a.b)("p",null,"After double-click on a cell in the grid the editing window will appear. To call it, we will use the ",Object(a.b)("b",null,"CellDblClick()")," event of the Grid:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-js"},'grid.events.on("CellDblClick", function(row,column,e){\n    openEditWindow(row);\n});\n')),Object(a.b)("p",null,"##Linking Context Menu and Grid"),Object(a.b)("p",null,'When you press the "Edit" item in the ContextMenu the editing window will appear as well. To implement this, we need to bind the context menu and the grid by using the ',Object(a.b)("b",null,"Click()")," event of ContextMenu:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-js"},"contextMenu.events.on(\"Click\", function(id,e){\n    switch(id) {\n        case 'edit': {\n            openEditWindow(grid.selection.getCell().row); \n    // in the argument of the function we specify the row the editing\n    // window should be opened for\n            break;\n        }\n        case 'delete': {\n            deleteItem();\n            break;\n        }\n    }\n});\n")),Object(a.b)("h2",{id:"getting-the-result"},"Getting the result"),Object(a.b)("p",null,"When you complete the steps described in this tutorial, you'll get an advanced demo application that allows editing data in the grid in several ways. This is how the ready app looks like:"),Object(a.b)("img",{style:{margin:"12px"},src:"tutorial/binding_components/binding_components.png"}),Object(a.b)("div",{id:"tutorial_step"},Object(a.b)("a",{id:"next_step",href:"tutorial/index.md"})))}c.isMDXComponent=!0}}]);